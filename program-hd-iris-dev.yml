name: program-hd-singlepass
description: Program HD profile (25fps) Single Pass
scaling: bicubic
streamSelection:
  includeTypes: [video, audio]
audioMixPresets:
  stereoOn12:
    defaultPan: { stereo: 'FL=c0|FR=c1' }

encodes:
  - type: X264Encode
    suffix: _6500_1080p
    twoPass: false
    height: 1080
    params:
      preset: medium
      maxrate: 6500k
      bufsize: 13000k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 4.0
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: X264Encode
    suffix: _4000_720p
    twoPass: false
    height: 720
    params:
      preset: medium
      maxrate: 4000k
      bufsize: 8000k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: high
      level: 3.1
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: X264Encode
    suffix: _2500_576p
    twoPass: false
    height: 576
    params:
      preset: medium
      maxrate: 2500k
      bufsize: 5000k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: main
      level: 3.1
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: X264Encode
    suffix: _1500_432p
    twoPass: false
    height: 432
    params:
      preset: medium
      maxrate: 1500k
      bufsize: 3000k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: main
      level: 3.0
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 128k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: X264Encode
    suffix: _800_360p
    twoPass: false
    height: 360
    params:
      preset: medium
      maxrate: 800k
      bufsize: 1600k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: main
      level: 3.0
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 96k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: X264Encode
    suffix: _300_216p
    twoPass: false
    height: 216
    params:
      preset: medium
      maxrate: 300k
      bufsize: 600k
      r: 25
      fps_mode: cfr
      crf: 21
      pix_fmt: yuv420p
      force_key_frames: #{profileParams['keyframes']?:'expr:not(mod(n,96))'}
      profile:v: main
      level: 3.0
      write_tmcd: 0
    x264-params:
      keyint: 192
      keyint_min: 96
      ref: 4
    audioEncode:
      optional: true
      type: AudioEncode
      codec: aac
      bitrate: 64k
      suffix: STEREO
      channels: 1
      audioMixPreset: monoLeft

  - type: AudioEncode
    optional: true
    codec: aac
    bitrate: 128k
    suffix: _STEREO
    channels: 1
    audioMixPreset: monoLeft
